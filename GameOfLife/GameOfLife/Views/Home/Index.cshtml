@Model GameOfLife.Models.Board;

@Scripts.Render("~/bundles/jquery")

@{
    ViewBag.Title = "Game of Life Web Application";
}

<div class="jumbotron">
    <h1>Welecom to the Game of Life!</h1>
    @*<p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>*@
</div>



<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8">

        @using (Html.BeginForm("CreateBoard", "Home"))
        {
            <input type="text" name="boardSize"/>
            <input type="submit" value="Create Board"/>

        }
        @if (Model != null)
        {
            foreach (var cell in Model.BoardCells)
            {
                if ((cell.Column%Model.Size == 1) && (cell.Row > 1))
                {
                    <div class="after-box floating-box" data-cell-row="@cell.Row" data-cell-column="@cell.Column"></div>
                }
                else
                {
                    <div class="floating-box" data-cell-row="@cell.Row" data-cell-column="@cell.Column"></div>
                }
            }
        }
    </div>
    <div class="col-md-2"></div>
</div>

<div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-8">
        <button id="initiate">Start Game!</button>
    </div>
</div>

<script type="text/javascript">
    $('.floating-box').click(function() {
        $(this).toggleClass('floating-box-new');
        $(this).toggleClass('floating-box');
    });
    $('.after-box').click(function() {
        $(this).toggleClass('after-box-new');
        $(this).toggleClass('after-box');
    });

    $("#initiate").click(function () {
        var divCollection = document.getElementsByTagName("div");
        alertText = "Live Cells:\n";
        for (var i = 0; i < divCollection.length; i++) {
            if (divCollection[i].getAttribute("class") == "floating-box-new") {
                alertText += "Row: " + divCollection[i].getAttribute("data-cell-row") + " Column: " + divCollection[i].getAttribute("data-cell-column") + "\n";
                //alertText = "AH-HA!";
            }
        }
        alert(alertText);
    });

</script>